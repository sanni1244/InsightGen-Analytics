<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Kanit:wght@900&family=Poppins:wght@700&&family=Lora:wght@600&family=Tilt+Prism&display=swap"
    rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Insight Bridge Analytics - Blog and Latest Information Feed</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="shortcut icon" href="../img/fav.png" type="image/x-icon">
  <link rel="stylesheet" href="../style/style.css">
  <link rel="stylesheet" href="../style/responsiveness.css">
</head>

<body class="main-body">
  <nav class="navbar navbar-expand-lg navbar-dark top-nav">
    <img src="../img/logo2.png" class="logo" alt="logo">
    <button class="navbar-toggler custom-button" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item active">
          <a class="nav-link text-dark" href="../#">HOME</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../blog/">BLOG</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../#services">SERVICES</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../admin/index.php">ADMIN</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../#about">ABOUT</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="../#contact">CONTACT</a>
        </li>
      </ul>
    </div>
  </nav>
  <div class="shape"></div>
  <div class="shape"></div>
  <div class="shape"></div>

  <div class="container">
    <h1 class="newslead text-center">Featured Blogs</h1>
    <div id="blogContainer" class="row"></div>
    <div class="btn-container text-center">
      <button id="prevBtn" class="btn btn-primary">Previous</button>
      <button id="nextBtn" class="btn btn-primary">Next</button>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>

</html>

<script>
var xhr = new XMLHttpRequest();
xhr.open("GET", "../json/blogs.json", true);
xhr.onreadystatechange = function () {
  if (xhr.readyState === 4 && xhr.status === 200) {
    var blogs = JSON.parse(xhr.responseText);
    displayBlogs(blogs);
  }
};
xhr.send();

function displayBlogs(blogs) {
  // Filter visible blogs and preserve their original index
  var visibleBlogs = blogs
    .map(function (blog, index) {
      blog.id = index; // Assign the original index as the id
      return blog;
    })
    .filter(function (blog) {
      return (
        !blog.visibility ||
        blog.visibility.toLowerCase() !== "hidden"
      );
    });

  visibleBlogs.sort(function (a, b) {
    var timestampA = new Date(convertTimestampFormat(a.timestamp)).getTime();
    var timestampB = new Date(convertTimestampFormat(b.timestamp)).getTime();
    return timestampB - timestampA;
  });

  var blogContainer = document.getElementById("blogContainer");
  var prevBtn = document.getElementById("prevBtn");
  var nextBtn = document.getElementById("nextBtn");

  var currentPage = 0;
  var blogsPerPage = 6;
  var totalPages = Math.ceil(visibleBlogs.length / blogsPerPage);

  function showBlogs(page) {
    blogContainer.innerHTML = "";

    var startIndex = page * blogsPerPage;
    var endIndex = Math.min(startIndex + blogsPerPage, visibleBlogs.length);

    for (var i = startIndex; i < endIndex; i++) {
      var blog = visibleBlogs[i];
      var blogElement = document.createElement("div");
      var blogImage = document.createElement("div");
      var blogDetails = document.createElement("div");

      blogElement.classList.add("blog", "col-md-6", "col-lg-4");

      blogImage.classList.add("blog-image");
      var imageElement = document.createElement("img");
      imageElement.src = blog.image;
      blogImage.appendChild(imageElement);

      blogDetails.classList.add("blog-details");
      var titleElement = document.createElement("h3");
      titleElement.classList.add("blog-title");
      titleElement.textContent = blog.title;
      blogDetails.appendChild(titleElement);

      var contentElement = document.createElement("div");
      contentElement.classList.add("blog-content");
      contentElement.innerHTML = getSummary(blog.content, 20);
      blogDetails.appendChild(contentElement);

      var readMoreLink = document.createElement("a");
      readMoreLink.classList.add("blog-readmore");
      readMoreLink.textContent = "Read More";
      readMoreLink.href = "../show/index.html?id=" + blog.id; // Use the assigned id
      blogDetails.appendChild(readMoreLink);

      blogElement.appendChild(blogImage);
      blogElement.appendChild(blogDetails);
      blogContainer.appendChild(blogElement);
    }

    function getSummary(content, numWords) {
        var words = String(content).split(" ");
        var summary = words.slice(0, numWords).join(" ");
        if (words.length > numWords) {
          summary += "...";
        }
        return summary;
      }    if (currentPage === 0) {      prevBtn.style.display = "none";
    } else {
      prevBtn.style.display = "inline-block";
    }

    if (currentPage === totalPages - 1) {
      nextBtn.style.display = "none";
    } else {
      nextBtn.style.display = "inline-block";
    }
  }

  showBlogs(currentPage);

  prevBtn.addEventListener("click", function () {
    if (currentPage > 0) {
      currentPage--;
      showBlogs(currentPage);
    }
  });

  nextBtn.addEventListener("click", function () {
    if (currentPage < totalPages - 1) {
      currentPage++;
      showBlogs(currentPage);
    }
  });
}

function convertTimestampFormat(timestamp) {
  // Assuming the input format is "DD/MM/YYYY, HH:mm:ss"
  var parts = timestamp.split(/[\s,]+/);
  var dateParts = parts[0].split("/");
  var timeParts = parts[1].split(":");
  var month = parseInt(dateParts[1]) - 1; // Months are zero-based
  var formattedTimestamp = `${dateParts[1]}/${dateParts[0]}/${dateParts[2]}, ${timeParts[0]}:${timeParts[1]}:${timeParts[2]}`;
  return formattedTimestamp;
}

window.onload = function () {
  var longUrl = "https://insightb-analytics.com/blog/index.html";
  var shortenedUrl = "https://insightb-analytics.com/blog";

  // Update the URL in the browser's address bar
  window.history.replaceState({}, document.title, shortenedUrl);
};

</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<style>
  /* Fonts */
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Teko:wght@500&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap');


  body {
    font-family: 'Open Sans', sans-serif;
    margin: 0;
    padding: 0;
  }

  .main-body {
    background-color: #f8f8f8;

  }

  .container {
    max-width: 1300px;
    margin: 0 auto;
    padding: 20px;
  }

  /* Header */
  .newslead {
    font-family: 'Abril Fatface', cursive;
    font-size: 36px;
    font-weight: 700;
    margin-top: 40px;
    margin-bottom: 20px;
    text-align: center;
  }

  /* Blog Section */
  .blog {
    margin-bottom: 30px;
  }

  .blog-image {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    height: auto;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    object-fit: cover;
  }

  .blog-image img {
    display: block;
    /* position: absolute; */
    width: 100%;
    height: 14rem;
    transition: transform 0.3s ease;
    object-fit: cover;
  }

  .blog-image:hover img {
    transform: scale(1.1);
  }

  .blog-details {
    padding: 20px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease;
    height: 13.5rem;
    font-family: 'Libre Baskerville', serif;
    font-size: 0.9rem;
  }

  .blog-readmore {
    position: absolute;
    bottom: 25px;
    transition: transform 0.3s ease;
    right: 30px;
  }

  .blog:hover .blog-details {
    transform: translateY(-10px);
  }

  .blog-title {
    font-family: 'Abril Fatface', cursive;
    font-size: 23px;
    margin-top: 0;
    margin-bottom: 10px;
  }

  .blog-content {
    margin-bottom: 10px;
  }



  /* Buttons */
  .btn-container {
    margin-top: 20px;
  }

  .btn {
    display: inline-block;
    font-weight: 700;
    color: #fff;
    background-color: #007bff;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    margin: 0 10px;
    text-decoration: none;
    font-family: 'Teko', sans-serif;
    transition: background-color 0.3s ease;
  }

  .btn:hover {
    background-color: #0056b3;
  }

  /* Animations */
  .shape {
    position: fixed;
    background-color: #007bff;

    opacity: 0.3;
    z-index: -1;
    animation: move 20s infinite;
  }

  .shape:nth-child(1) {
    width: 100px;
    height: 100px;
    top: 0;
    left: 10%;
  }

  .shape:nth-child(3) {
    width: 80px;
    height: 80px;
    top: 85%;
    left: 50%;
    animation: move 18s infinite;
  }

  /* Navigation */
  #includedContent {
    display: block;
    margin-bottom: 40px;
  }

  /* Pagination Buttons */
  #prevBtn,
  #nextBtn {
    display: inline-block;
    font-weight: 700;
    color: #fff;
    background-color: #007bff;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    margin: 10px;
    text-decoration: none;
    transition: background-color 0.3s ease;
  }

  #prevBtn:hover,
  #nextBtn:hover {
    background-color: #0056b3;
  }

  /* Media Queries */

  /* Additional Styles */

  /* Shape Animation */
  @keyframes move {
    0% {
      transform: translate(-10%, -10%);
    }

    50% {
      transform: translate(10%, 10%);
    }

    100% {
      transform: translate(-10%, -10%);
    }
  }

  /* Fade In Animation */
  .fade-in {
    opacity: 0;
    animation: fadeIn 0.5s ease-in-out forwards;
  }

  @keyframes fadeIn {
    0% {
      opacity: 0;
    }

    100% {
      opacity: 1;
    }
  }

  /* Zoom In Animation */
  .zoom-in {
    transform: scale(0.8);
    transition: transform 0.3s ease-in-out;
  }

  .zoom-in:hover {
    transform: scale(1);
  }

  /* Slide Up Animation */
  .slide-up {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  }

  .slide-up:hover {
    opacity: 1;
    transform: translateY(0);
  }

  /* Slide Left Animation */
  .slide-left {
    opacity: 0;
    transform: translateX(20px);
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  }

  .slide-left:hover {
    opacity: 1;
    transform: translateX(0);
  }

  /* Slide Right Animation */
  .slide-right {
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  }

  .slide-right:hover {
    opacity: 1;
    transform: translateX(0);
  }

  /* Slide Down Animation */
  .slide-down {
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
  }

  .slide-down:hover {
    opacity: 1;
    transform: translateY(0);
  }

  .shape {
    position: absolute;
    width: 80px;
    height: 80px;
    background-color: #9bbcdf;
    opacity: 0.6;
  }


  .shape:nth-child(2) {
    right: 50px;
    top: 100px;
    background-color: #d99e4b;
    clip-path: polygon(0% 25%, 100% 0%, 100% 75%);
    animation: shapeAnimation1 10s infinite linear alternate-reverse;
  }

  @keyframes shapeAnimation1 {
    0% {
      transform: rotate(0deg);
    }

    100% {
      transform: rotate(360deg);
    }
  }

  @media (max-width: 1024px) {}

  @media (max-width: 767.5px) {
    .container {
      max-width: 500px;
      padding: 10px;

    }

    .blog-title {
      font-size: 20px;

    }
  }

  @media (max-width: 576px) {
    .container {
      padding: 5px;
    }

    .blog-title {
      font-size: 18px;
    }
    .container {
      overflow: hidden;
    }
  }

  @media (max-width: 286px) {

    .blog-details {
      height: 18rem;
    }
  }
</style>